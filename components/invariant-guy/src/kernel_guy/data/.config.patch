# for btf/kfuncs
CONFIG_DEBUG_INFO_NONE=n
CONFIG_BPF_PROG_TYPE_TRACING=y
CONFIG_ARCH_SUPPORTS_UPROBES=y
CONFIG_BPF=y
CONFIG_BPF_EVENTS=y
CONFIG_BPF_JIT=y
CONFIG_BPF_JIT_ALWAYS_ON=y
CONFIG_BPF_KPROBE_OVERRIDE=y
CONFIG_BPF_LIRC_MODE2=y
CONFIG_BPF_LSM=y
CONFIG_BPF_PRELOAD=y
CONFIG_BPF_PRELOAD_UMD=y
CONFIG_BPF_STREAM_PARSER=y
CONFIG_BPF_SYSCALL=y
CONFIG_BPFILTER=y
CONFIG_BPFILTER_UMH=y
CONFIG_CGROUP_BPF=y
CONFIG_CGROUP_NET_CLASSID=y
CONFIG_CGROUPS=y
CONFIG_COMPILE_TEST=y
CONFIG_DEBUG_FS=y
CONFIG_DEBUG_INFO=y
CONFIG_DEBUG_INFO_BTF=y
CONFIG_DEBUG_INFO_BTF_MODULES=y
CONFIG_DEBUG_INFO_DWARF5=y
CONFIG_DEBUG_INFO_NONE=n
CONFIG_DEBUG_INFO_SPLIT=n
CONFIG_DYNAMIC_FTRACE=y
CONFIG_FTRACE_SYSCALLS=y
CONFIG_FUNCTION_ERROR_INJECTION=y
CONFIG_FUNCTION_TRACER=y
CONFIG_HAVE_DYNAMIC_FTRACE=y
CONFIG_HAVE_EBPF_JIT=y
CONFIG_HAVE_KPROBES=y
CONFIG_HEXAGON=n
CONFIG_IP_ROUTE_CLASSID=y
CONFIG_IPV6_SEG6_BPF=y
CONFIG_KPROBE_EVENTS=y
CONFIG_KPROBES=y
CONFIG_LWTUNNEL_BPF=y
CONFIG_NET=y
CONFIG_NET_ACT_BPF=y
CONFIG_NET_CLS_ACT=y
CONFIG_NET_CLS_BPF=y
CONFIG_NET_SCH_INGRESS=y
CONFIG_NETFILTER_XT_MATCH_BPF=y
CONFIG_RISCV=n
CONFIG_SOCK_CGROUP_DATA=y
CONFIG_TEST_BPF=y
CONFIG_TRACING=y
CONFIG_UPROBE_EVENTS=y
CONFIG_UPROBES=y
CONFIG_XDP_SOCKETS=y
CONFIG_XFRM=y

# for networking (the first two are required for debootstrat)
CONFIG_CONFIGFS_FS=y
CONFIG_SECURITYFS=y
CONFIG_CMDLINE_BOOL=y
CONFIG_CMDLINE="net.ifnames=0"

# for fs mounts
CONFIG_9P_FS=y
CONFIG_9P_FS_POSIX_ACL=y
CONFIG_9P_FS_SECURITY=y
CONFIG_NETWORK_FILESYSTEMS=y
CONFIG_NET_9P=y
CONFIG_NET_9P_DEBUG=y
CONFIG_NET_9P_VIRTIO=y

# make it more debuggable
CONFIG_READABLE_ASM=y

# enable KASAN
CONFIG_KASAN_SHADOW_OFFSET=0xdffffc0000000000
CONFIG_HAVE_ARCH_KASAN=y
CONFIG_HAVE_ARCH_KASAN_VMALLOC=y
CONFIG_CC_HAS_KASAN_GENERIC=y
CONFIG_KASAN=y
CONFIG_KASAN_GENERIC=y
CONFIG_KASAN_INLINE=y
CONFIG_KASAN_STACK=y

# disable randomization
CONFIG_RANDOMIZE_BASE=n

# For better sandboxing
CONFIG_MEMCG=y

# Disable kernel panic
CONFIG_PANIC_ON_OOPS=n
CONFIG_PANIC_TIMEOUT=0
CONFIG_STACKPROTECTOR=n